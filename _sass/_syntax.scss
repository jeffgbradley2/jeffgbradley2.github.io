// =============================================================================
// Syntax Highlighting - Rouge Theme for Dark/Light Modes
// =============================================================================

// Code block wrapper
.highlight {
  position: relative;
  margin: var(--space-6) 0;
  border-radius: var(--radius-md);
  overflow: hidden;

  pre {
    margin: 0;
    border: none;
    border-radius: var(--radius-md);
  }
}

// Language label (optional)
.highlight[data-lang]::before {
  content: attr(data-lang);
  position: absolute;
  top: 0;
  right: 0;
  padding: var(--space-1) var(--space-3);
  font-size: var(--text-xs);
  font-family: var(--font-mono);
  color: var(--text-tertiary);
  background-color: var(--bg-tertiary);
  border-bottom-left-radius: var(--radius-sm);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

// Copy button
.copy-button {
  position: absolute;
  top: var(--space-2);
  right: var(--space-2);
  padding: var(--space-2);
  background-color: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--text-secondary);
  cursor: pointer;
  opacity: 0;
  transition: all var(--transition-fast);

  &:hover {
    color: var(--text-primary);
    border-color: var(--text-secondary);
  }

  &.copied {
    color: var(--accent);
    border-color: var(--accent);
  }

  svg {
    width: 16px;
    height: 16px;
    display: block;
  }

  .highlight:hover & {
    opacity: 1;
  }
}

// =============================================================================
// Dark Mode Syntax Colors (Default)
// =============================================================================

.highlight {
  // Background
  background-color: var(--code-bg);

  .c,      // Comment
  .c1,     // Comment.Single
  .cm,     // Comment.Multiline
  .cs {    // Comment.Special
    color: #6A737D;
    font-style: italic;
  }

  .cp {    // Comment.Preproc
    color: #6A737D;
  }

  .k,      // Keyword
  .kc,     // Keyword.Constant
  .kd,     // Keyword.Declaration
  .kn,     // Keyword.Namespace
  .kp,     // Keyword.Pseudo
  .kr,     // Keyword.Reserved
  .kt {    // Keyword.Type
    color: #FF7B72;
  }

  .o,      // Operator
  .ow {    // Operator.Word
    color: #FF7B72;
  }

  .p {     // Punctuation
    color: #C9D1D9;
  }

  .n,      // Name
  .na,     // Name.Attribute
  .nb,     // Name.Builtin
  .nc,     // Name.Class
  .nd,     // Name.Decorator
  .ne,     // Name.Exception
  .nf,     // Name.Function
  .ni,     // Name.Entity
  .nl,     // Name.Label
  .nn,     // Name.Namespace
  .no,     // Name.Constant
  .nt,     // Name.Tag
  .nv,     // Name.Variable
  .nx {    // Name.Other
    color: #C9D1D9;
  }

  .nc,     // Name.Class
  .nf {    // Name.Function
    color: #D2A8FF;
  }

  .na {    // Name.Attribute
    color: #79C0FF;
  }

  .nb {    // Name.Builtin
    color: #FFA657;
  }

  .s,      // String
  .s1,     // String.Single
  .s2,     // String.Double
  .sb,     // String.Backtick
  .sc,     // String.Char
  .sd,     // String.Doc
  .se,     // String.Escape
  .sh,     // String.Heredoc
  .si,     // String.Interpol
  .sr,     // String.Regex
  .ss,     // String.Symbol
  .sx {    // String.Other
    color: #A5D6FF;
  }

  .m,      // Number
  .mf,     // Number.Float
  .mh,     // Number.Hex
  .mi,     // Number.Integer
  .mo,     // Number.Oct
  .mb,     // Number.Bin
  .mx,     // Number.Int.Long
  .il {    // Literal.Number.Integer.Long
    color: #79C0FF;
  }

  .bp {    // Name.Builtin.Pseudo
    color: #79C0FF;
  }

  .vc,     // Name.Variable.Class
  .vg,     // Name.Variable.Global
  .vi {    // Name.Variable.Instance
    color: #FFA657;
  }

  .gd {    // Generic.Deleted
    color: #FFA198;
    background-color: rgba(255, 161, 152, 0.1);
  }

  .gi {    // Generic.Inserted
    color: #7EE787;
    background-color: rgba(126, 231, 135, 0.1);
  }

  .ge {    // Generic.Emph
    font-style: italic;
  }

  .gs {    // Generic.Strong
    font-weight: bold;
  }

  .err {   // Error
    color: #F85149;
  }

  // Line numbers
  .lineno {
    color: #484F58;
    padding-right: var(--space-4);
    user-select: none;
  }
}

// =============================================================================
// Light Mode Syntax Colors
// =============================================================================

[data-theme="light"] .highlight {
  background-color: var(--code-bg);

  .c, .c1, .cm, .cs {
    color: #6A737D;
  }

  .cp {
    color: #6A737D;
  }

  .k, .kc, .kd, .kn, .kp, .kr, .kt {
    color: #D73A49;
  }

  .o, .ow {
    color: #D73A49;
  }

  .p {
    color: #24292E;
  }

  .n, .na, .nb, .nc, .nd, .ne, .nf, .ni, .nl, .nn, .no, .nt, .nv, .nx {
    color: #24292E;
  }

  .nc, .nf {
    color: #6F42C1;
  }

  .na {
    color: #005CC5;
  }

  .nb {
    color: #E36209;
  }

  .s, .s1, .s2, .sb, .sc, .sd, .se, .sh, .si, .sr, .ss, .sx {
    color: #032F62;
  }

  .m, .mf, .mh, .mi, .mo, .mb, .mx, .il {
    color: #005CC5;
  }

  .bp {
    color: #005CC5;
  }

  .vc, .vg, .vi {
    color: #E36209;
  }

  .gd {
    color: #B31D28;
    background-color: rgba(179, 29, 40, 0.1);
  }

  .gi {
    color: #22863A;
    background-color: rgba(34, 134, 58, 0.1);
  }

  .err {
    color: #B31D28;
  }

  .lineno {
    color: #959DA5;
  }
}

// =============================================================================
// Inline Code in Light Mode
// =============================================================================

[data-theme="light"] code {
  background-color: var(--inline-code-bg);
}
